!function(e){e(window).on("load",function(){e("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["colormag-background"]=wp.customize.Control.extend({ready:function(){"use strict";this.initColorMagBackgroundControl()},initColorMagBackgroundControl:function(){var r=this,e=r.setting._value,t=r.container.find(".colormag-color-picker-alpha");!_.isUndefined(e["background-image"])&&""!==e["background-image"]||(r.container.find(".customize-control-content > .background-repeat").hide(),r.container.find(".customize-control-content > .background-position").hide(),r.container.find(".customize-control-content > .background-size").hide(),r.container.find(".customize-control-content > .background-attachment").hide()),t.wpColorPicker({change:function(){jQuery("html").hasClass("colorpicker-ready")&&setTimeout(function(){r.saveValue("background-color",t.val())},100)},clear:function(e){jQuery(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&r.saveValue("background-color","")}}),r.container.on("click",".background-image-upload-button, .thumbnail-image img",function(e){var i=wp.media({multiple:!1}).open().on("select",function(){var e,t,o,n=i.state().get("selection").first(),a=n.toJSON().sizes.full.url;_.isUndefined(n.toJSON().sizes.medium)?_.isUndefined(n.toJSON().sizes.thumbnail)||(a=n.toJSON().sizes.thumbnail.url):a=n.toJSON().sizes.medium.url,e=n.toJSON().sizes.full.url,n.toJSON().id,n.toJSON().width,n.toJSON().height,""!==e&&r.container.find(".customize-control-content > .background-repeat, .customize-control-content > .background-position, .customize-control-content > .background-size, .customize-control-content > .background-attachment").show(),r.saveValue("background-image",e),t=r.container.find(".placeholder, .thumbnail"),o=r.container.find(".background-image-upload-remove-button"),t.length&&t.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+a+'" alt="" />'),o.length&&o.show()});e.preventDefault()}),r.container.on("click",".background-image-upload-remove-button",function(e){var t,o;e.preventDefault(),r.saveValue("background-image",""),t=r.container.find(".placeholder, .thumbnail"),o=r.container.find(".background-image-upload-remove-button"),r.container.find(".customize-control-content > .background-repeat").hide(),r.container.find(".customize-control-content > .background-position").hide(),r.container.find(".customize-control-content > .background-size").hide(),r.container.find(".customize-control-content > .background-attachment").hide(),t.length&&t.removeClass().addClass("placeholder").html(ColorMagCustomizerControlBackground.placeholder),o.length&&o.hide()}),r.container.on("change",".background-repeat select",function(){r.saveValue("background-repeat",jQuery(this).val())}),r.container.on("change",".background-position select",function(){r.saveValue("background-position",jQuery(this).val())}),r.container.on("change",".background-size select",function(){r.saveValue("background-size",jQuery(this).val())}),r.container.on("change",".background-attachment select",function(){r.saveValue("background-attachment",jQuery(this).val())})},saveValue:function(e,t){var o=this,n=jQuery("#customize-control-"+o.id.replace("[","-").replace("]","")+" .background-hidden-value"),a=o.setting._value;a[e]=t,jQuery(n).attr("value",JSON.stringify(a)).trigger("change"),o.setting.set(a)}})}(jQuery),wp.customize.controlConstructor["colormag-buttonset"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),function(e){e(window).on("load",function(){e("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["colormag-color"]=wp.customize.Control.extend({ready:function(){"use strict";var n=this;this.container.find(".colormag-color-picker-alpha").wpColorPicker({change:function(e,t){var o=t.color.toString();jQuery("html").hasClass("colorpicker-ready")&&n.setting.set(o)}})}})}(jQuery),wp.customize.controlConstructor["colormag-dropdown-categories"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("change","select",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["colormag-editor"]=wp.customize.Control.extend({ready:function(){"use strict";var e="editor_"+this.id;wp.editor.initialize(e,{tinymce:{wpautop:!0},quicktags:!0,mediaButtons:!0})},onChangeActive:function(e,t){"use strict";var o,n=this,a="editor_"+n.id,i=n.container.find("textarea");(o=tinyMCE.get(a))&&o.onChange.add(function(e){var t;e.save(),t=o.getContent(),i.val(t).trigger("change"),wp.customize.instance(n.id).set(t)})}}),function(g){wp.customize.controlConstructor["colormag-group"]=wp.customize.Control.extend({ready:function(){"use strict";this.registerToggleEvents(),this.container.on("colormag_settings_changed",this.onOptionChange)},registerToggleEvents:function(){var l=this;g(".wp-full-overlay-sidebar-content").click(function(e){g(e.target).closest(".colormag-field-settings-modal").length||g(".colormag-group-toggle-icon.open").trigger("click")}),l.container.on("click",".colormag-group-wrap .colormag-group-toggle-icon",function(e){e.preventDefault(),e.stopPropagation();var t=g(this),o=t.closest(".customize-control-colormag-group"),n=o.find(".colormag-field-settings-modal").data("loaded"),a=o.parents(".control-section");if(t.hasClass("open"))o.find(".colormag-field-settings-modal").hide();else{var i=a.find(".colormag-group-toggle-icon.open");if(0<i.length&&i.trigger("click"),n)o.find(".colormag-field-settings-modal").show();else{var r=l.params.colormag_fields,c=g(ColorMagCustomizerControlGroup.group_modal_tmpl),s=g("#customize-footer-actions .active").attr("data-device");o.find(".colormag-field-settings-wrap").append(c),o.find(".colormag-fields-wrap").attr("data-control",l.params.name),l.colormag_render_field(o,r,l),o.find(".colormag-field-settings-modal").show(),"mobile"===s?(g(".control-wrap.mobile").addClass("active"),g(".responsive-switchers .preview-mobile").addClass("active"),g(".control-wrap.tablet, .control-wrap.desktop").removeClass("active"),g(".responsive-switchers .preview-tablet, .responsive-switchers .preview-desktop").removeClass("active")):"tablet"===s?(g(".control-wrap.tablet").addClass("active"),g(".responsive-switchers .preview-tablet").addClass("active"),g(".control-wrap.mobile, .control-wrap.desktop").removeClass("active"),g(".responsive-switchers .preview-mobile, .responsive-switchers .preview-desktop").removeClass("active")):(g(".control-wrap.desktop").addClass("active"),g(".responsive-switchers .preview-desktop").addClass("active"),g(".control-wrap.mobile, .control-wrap.tablet").removeClass("active"),g(".responsive-switchers .preview-mobile, .responsive-switchers .preview-tablet").removeClass("active"))}}t.toggleClass("open")}),l.container.on("click",".colormag-group-wrap > .customizer-text",function(e){e.preventDefault(),e.stopPropagation(),g(this).find(".colormag-group-toggle-icon").trigger("click")})},colormag_render_field:function(e,t,o){var n=this,a=e.find(".colormag-fields-wrap"),i="",r=[],c=n.isJSONString(o.params.value)?JSON.parse(o.params.value):{};if(void 0!==t.tabs){var s=0;i+='<div id="'+o.params.name+'-tabs" class="colormag-group-tabs">',i+='<ul class="colormag-group-list">',_.each(t.tabs,function(e,t){var o="";0===s&&(o="active"),i+='<li class="'+o+'"><a href="#tab-'+t+'"><span>'+t+"</span></a></li>",s++}),i+="</ul>",i+='<div class="colormag-tab-content" >',_.each(t.tabs,function(e,t){var o=n.generateFieldHtml(e,c);i+='<div id="tab-'+t+'" class="tab">',i+=o.html,_.each(o.controls,function(e,t){r.push({key:e.key,value:e.value,name:e.name})}),i+="</div>"}),i+="</div>",i+="</div>",a.html(i),g("#"+o.params.name+"-tabs").tabs()}else{var l=n.generateFieldHtml(t,c);i+=l.html,_.each(l.controls,function(e,t){r.push({key:e.key,value:e.value,name:e.name})}),a.html(i)}_.each(r,function(e,t){switch(e.key){case"colormag-color":n.initColorControl(a,o,e.name);break;case"colormag-background":n.initBackgroundControl(o,e,e.name);break;case"colormag-typography":n.initTypographyControl(o,e,e.name)}}),e.find(".colormag-field-settings-modal").data("loaded",!0)},isJSONString:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},generateFieldHtml:function(e,t){var d="",g=[];_.each(e,function(e,t){var o=wp.customize.control(e.name)?wp.customize.control(e.name).params.value:"",n=e.control,a="customize-control-"+n+"-content",i=wp.template(a),r=o||e.default,c="",s="";e.value=r,e.title=e.label,_.each(e.data_attrs,function(e,t){c+=" data-"+t+' ="'+e+'"'}),_.each(e.input_attrs,function(e,t){s+=t+' ="'+e+'"'}),e.dataAttrs=c,e.inputAttrs=s,g.push({key:n,value:r,name:e.name});var l="",u=["colormag-typography"];"colormag-typography"===e.control&&u.includes(e.control)&&(e.languages=ColorMagCustomizerControlTypographySubsets),u.includes(e.control)&&(l="has-responsive-switchers"),d+='<li id="customize-control-'+e.name+'" class="customize-control '+l+" customize-control-"+e.control+'" >',d+=i(e),d+="</li>"});var o=new Object;return o.controls=g,o.html=d,o},onOptionChange:function(e,t,o,n,a){g(".hidden-field-"+a).val(n),wp.customize.control(a).setting.set(n)},initColorControl:function(e,t,n){var a=this;e.find(".customize-control-colormag-color .colormag-color-picker-alpha").wpColorPicker({change:function(e,t){if(void 0!==e.originalEvent||void 0!==t.color._alpha){var o=g(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];n=(n=g(o).parents(".customize-control").attr("id")).replace("customize-control-",""),g(o).val(t.color.toString()),a.container.trigger("colormag_settings_changed",[a,g(o),t.color.toString(),n])}},clear:function(e){var t=g(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];n=(n=g(t).parents(".customize-control").attr("id")).replace("customize-control-",""),g(t).val(""),a.container.trigger("colormag_settings_changed",[a,g(t),"",n]),wp.customize.previewer.refresh()}})},initBackgroundControl:function(c,e,s){var t=g("#customize-control-"+c.id.replace("[","-").replace("]","")+" .background-hidden-value"),o=JSON.parse(t.val()),n=e.name,a=c.container.find(".colormag-color-picker-alpha"),l=c.container.find("#customize-control-"+n);!_.isUndefined(o["background-image"])&&""!==o["background-image"]||(l.find(".customize-control-content > .background-repeat").hide(),l.find(".customize-control-content > .background-position").hide(),l.find(".customize-control-content > .background-size").hide(),l.find(".customize-control-content > .background-attachment").hide()),a.wpColorPicker({change:function(){if(g("html").hasClass("colorpicker-ready")){var e=g(this);setTimeout(function(){c.saveBackgroundValue("background-color",a.val(),e,s)},100)}},clear:function(e){var t=g(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];t&&c.saveBackgroundValue("background-color","",g(t),s),wp.customize.previewer.refresh()}}),l.on("click",".background-image-upload-button, .thumbnail-image img",function(e){var i=g(this),r=wp.media({multiple:!1}).open().on("select",function(){var e,t,o,n=r.state().get("selection").first(),a=n.toJSON().sizes.full.url;_.isUndefined(n.toJSON().sizes.medium)?_.isUndefined(n.toJSON().sizes.thumbnail)||(a=n.toJSON().sizes.thumbnail.url):a=n.toJSON().sizes.medium.url,e=n.toJSON().sizes.full.url,n.toJSON().id,n.toJSON().width,n.toJSON().height,""!==e&&l.find(".customize-control-content > .background-repeat, .customize-control-content > .background-position, .customize-control-content > .background-size, .customize-control-content > .background-attachment").show(),c.saveBackgroundValue("background-image",e,i,s),t=l.find(".placeholder, .thumbnail"),o=l.find(".background-image-upload-remove-button"),t.length&&t.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+a+'" alt="" />'),o.length&&o.show()});e.preventDefault()}),l.on("click",".background-image-upload-remove-button",function(e){var t,o;e.preventDefault(),c.saveBackgroundValue("background-image","",g(this)),t=l.find(".placeholder, .thumbnail"),o=l.find(".background-image-upload-remove-button"),l.find(".customize-control-content > .background-repeat").hide(),l.find(".customize-control-content > .background-position").hide(),l.find(".customize-control-content > .background-size").hide(),l.find(".customize-control-content > .background-attachment").hide(),t.length&&t.removeClass().addClass("placeholder").html(ColorMagCustomizerControlBackground.placeholder),o.length&&o.hide()}),l.on("change",".background-repeat select",function(){c.saveBackgroundValue("background-repeat",g(this).val(),g(this),s)}),l.on("change",".background-position select",function(){c.saveBackgroundValue("background-position",g(this).val(),g(this),s)}),l.on("change",".background-size select",function(){c.saveBackgroundValue("background-size",g(this).val(),g(this),s)}),l.on("change",".background-attachment select",function(){c.saveBackgroundValue("background-attachment",g(this).val(),g(this),s)})},saveBackgroundValue:function(e,t,o,n){var a=g("#customize-control-"+this.id.replace("[","-").replace("]","")+" .background-hidden-value"),i=JSON.parse(a.val());i[e]=t,g(a).attr("value",JSON.stringify(i)).trigger("change"),n=(n=g(o).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,o,i,n])},initTypographyControl:function(e,t,o){e.setting._value;var n=t.name,a=e.container.find("#customize-control-"+n);e.renderTypographyFontSelector(g(this),o,t),e.renderTypographyVariantSelector(g(this),o,t),e.renderTypographySubsetSelector(g(this),o,t),a.on("change",".font-style select",function(){e.saveTypographyValue("font-style",g(this).val(),g(this),o)}),a.on("change",".text-transform select",function(){e.saveTypographyValue("text-transform",g(this).val(),g(this),o)}),a.on("change",".text-decoration select",function(){e.saveTypographyValue("text-decoration",g(this).val(),g(this),o)}),a.on("change keyup paste input",".font-size input",function(){e.saveTypographyFontSize(g(this),o,t)}),a.on("change keyup paste input",".line-height input",function(){e.saveTypographyLineHeight(g(this),o,t)}),a.on("change keyup paste input",".letter-spacing input",function(){e.saveTypographyLetterSpacing(g(this),o,t)})},renderTypographyFontSelector:function(e,t,o){var n,a=this,i=a.selector+" .font-family select",r=[],c=[],s=[],l=g("#customize-control-"+a.id.replace("[","-").replace("]","")+" .typography-hidden-value"),u=JSON.parse(l.val()),d=a.getTypographyFonts();_.isUndefined(d.standard)||_.each(d.standard,function(e){r.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),_.isUndefined(d.google)||_.each(d.google,function(e){c.push({id:e.family,text:e.label})}),data=[{text:d.standardfontslabel,children:r},{text:d.googlefontslabel,children:c}],_.isUndefined(d.custom)||(_.each(d.custom,function(e){s.push({id:e.family,text:e.label})}),data.push({text:d.customfontslabel,children:s})),n=g(i).selectWoo({data:data,width:"100%"}),u["font-family"]&&n.val(u["font-family"].replace(/'/g,'"')).trigger("change"),n.on("change",function(){a.saveTypographyValue("font-family",g(this).val(),g(this),t),a.renderTypographyVariantSelector(g(this),t,o),a.renderTypographySubsetSelector(g(this),t,o)})},getTypographyFonts:function(){return _.isUndefined(ColorMagCustomizerControlTypography)?{google:[],standard:[]}:ColorMagCustomizerControlTypography},renderTypographyVariantSelector:function(e,t,o){var n,a=this,i=g("#customize-control-"+a.id.replace("[","-").replace("]","")+" .typography-hidden-value"),r=JSON.parse(i.val()),c=r["font-family"],s=a.getTypographyVariants(c),l=a.selector+" .font-weight select",u=[],d=!1;!1!==s?(g(a.selector+" .font-weight").show(),_.each(s,function(e){r["font-weight"]===e.id&&(d=!0),u.push({id:e.id,text:e.label})}),d||(r["font-weight"]="regular"),g(l).hasClass("select2-hidden-accessible")&&(g(l).selectWoo("destroy"),g(l).empty()),(n=g(l).selectWoo({data:u,width:"100%"})).val(r["font-weight"]).trigger("change"),n.on("change",function(){a.saveTypographyValue("font-weight",g(this).val(),g(this),t)})):g(a.selector+" .font-weight").hide()},getTypographyVariants:function(t){var e=this.getTypographyFonts(),o=!1;return _.each(e.standard,function(e){if(t&&e.family===t.replace(/'/g,'"'))return o=e.variants}),_.each(e.google,function(e){if(e.family===t)return o=e.variants}),_.isUndefined(e.custom)||_.each(e.custom,function(e){if(e.custom===t)return o=e.variants}),o},renderTypographySubsetSelector:function(e,t,o){var n,a=this,i=g("#customize-control-"+a.id.replace("[","-").replace("]","")+" .typography-hidden-value"),r=JSON.parse(i.val()),c=r["font-family"],s=a.getTypographySubsets(c),l=a.selector+" .subsets select",u=[],d=r.subsets;!1!==s?(g(a.selector+" .subsets").show(),_.each(s,function(t){_.isObject(d)&&-1===d.indexOf(t.id)&&(d=_.reject(d,function(e){return e===t.id})),u.push({id:t.id,text:t.label})})):g(a.selector+" .subsets").hide(),g(l).hasClass("select2-hidden-accessible")&&(g(l).selectWoo("destroy"),g(l).empty()),(n=g(l).selectWoo({data:u,width:"100%"})).val(d).trigger("change"),n.on("change",function(){a.saveTypographyValue("subsets",g(this).val(),g(this),t)})},getTypographySubsets:function(t){var o=!1,e=this.getTypographyFonts();return _.each(e.google,function(e){if(e.family===t)return o=e.subsets}),o},saveTypographyFontSize:function(e,t,o){var n=g("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),a=JSON.parse(n.val()),i=o.name,r=this.container.find("#customize-control-"+i),c={"font-size":{}};r.find(".font-size .control-wrap").each(function(){var e=g(this).find("input").val(),t=g(this).find("input").data("device");c["font-size"][t]=e}),g.extend(a,c),g(n).attr("value",JSON.stringify(a)).trigger("change"),t=(t=g(e).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,e,a,t])},saveTypographyLineHeight:function(e,t,o){var n=g("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),a=JSON.parse(n.val()),i=o.name,r=this.container.find("#customize-control-"+i),c={"line-height":{}};r.find(".line-height .control-wrap").each(function(){var e=g(this).find("input").val(),t=g(this).find("input").data("device");c["line-height"][t]=e}),g.extend(a,c),g(n).attr("value",JSON.stringify(a)).trigger("change"),t=(t=g(e).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,e,a,t])},saveTypographyLetterSpacing:function(e,t,o){var n=g("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),a=JSON.parse(n.val()),i=o.name,r=this.container.find("#customize-control-"+i),c={"letter-spacing":{}};r.find(".letter-spacing .control-wrap").each(function(){var e=g(this).find("input").val(),t=g(this).find("input").data("device");c["letter-spacing"][t]=e}),g.extend(a,c),g(n).attr("value",JSON.stringify(a)).trigger("change"),t=(t=g(e).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,e,a,t])},saveTypographyValue:function(e,t,o,n){var a=g("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),i=JSON.parse(a.val());i[e]=t,g(a).attr("value",JSON.stringify(i)).trigger("change"),n=(n=g(o).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("colormag_settings_changed",[this,o,i,n])}})}(jQuery),wp.customize.controlConstructor["colormag-radio-image"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["colormag-slider"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;jQuery("input[type=range]").on("input change",function(){var e=jQuery(this).attr("value"),t=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .value");t.val(e),t.change()}),jQuery(".colormag-slider-reset").click(function(){var e=jQuery(this).closest(".slider-wrapper"),t=e.find("input[type=range]"),o=e.find(".colormag-range-value .value"),n=t.data("reset_value");t.val(n),o.val(n),o.change()}),this.container.on("input change","input[type=number]",function(){var e=jQuery(this).val();jQuery(this).closest(".slider-wrapper").find("input[type=range]").val(e),t.setting.set(e)})}}),wp.customize.controlConstructor["colormag-sortable"]=wp.customize.Control.extend({ready:function(){"use strict"}}),wp.customize.controlConstructor["colormag-toggle"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["colormag-typography"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;e.renderFontSelector(),e.renderVariantSelector(),e.renderSubsetSelector(),e.container.on("change",".font-style select",function(){e.saveValue("font-style",jQuery(this).val())}),e.container.on("change",".text-transform select",function(){e.saveValue("text-transform",jQuery(this).val())}),e.container.on("change",".text-decoration select",function(){e.saveValue("text-decoration",jQuery(this).val())}),e.container.on("change keyup paste input",".font-size input",function(){e.updateFontSize()}),e.container.on("change keyup paste input",".line-height input",function(){e.updateLineHeight()}),e.container.on("change keyup paste input",".letter-spacing input",function(){e.updateLetterSpacing()})},renderFontSelector:function(){var e,t=this,o=t.selector+" .font-family select",n=[],a=[],i=[],r=t.setting._value,c=t.getFonts();_.isUndefined(c.standard)||_.each(c.standard,function(e){n.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})}),_.isUndefined(c.google)||_.each(c.google,function(e){a.push({id:e.family,text:e.label})}),data=[{text:c.standardfontslabel,children:n},{text:c.googlefontslabel,children:a}],_.isUndefined(c.custom)||(_.each(c.custom,function(e){i.push({id:e.family,text:e.label})}),data.push({text:c.customfontslabel,children:i})),e=jQuery(o).selectWoo({data:data,width:"100%"}),r["font-family"]&&e.val(r["font-family"].replace(/'/g,'"')).trigger("change"),e.on("change",function(){t.saveValue("font-family",jQuery(this).val()),t.renderVariantSelector(),t.renderSubsetSelector()})},getFonts:function(){return _.isUndefined(ColorMagCustomizerControlTypography)?{google:[],standard:[]}:ColorMagCustomizerControlTypography},renderVariantSelector:function(){var e,t=this,o=t.setting._value,n=o["font-family"],a=t.getVariants(n),i=t.selector+" .font-weight select",r=[],c=!1;!1!==a?(jQuery(t.selector+" .font-weight").show(),_.each(a,function(e){o["font-weight"]===e.id&&(c=!0),r.push({id:e.id,text:e.label})}),c||(o["font-weight"]="regular"),jQuery(i).hasClass("select2-hidden-accessible")&&(jQuery(i).selectWoo("destroy"),jQuery(i).empty()),(e=jQuery(i).selectWoo({data:r,width:"100%"})).val(o["font-weight"]).trigger("change"),e.on("change",function(){t.saveValue("font-weight",jQuery(this).val())})):jQuery(t.selector+" .font-weight").hide()},getVariants:function(t){var e=this.getFonts(),o=!1;return _.each(e.standard,function(e){if(t&&e.family===t.replace(/'/g,'"'))return o=e.variants}),_.each(e.google,function(e){if(e.family===t)return o=e.variants}),_.isUndefined(e.custom)||_.each(e.custom,function(e){if(e.custom===t)return o=e.variants}),o},renderSubsetSelector:function(){var e,t=this,o=t.setting._value,n=o["font-family"],a=t.getSubsets(n),i=t.selector+" .subsets select",r=[],c=o.subsets;!1!==a?(jQuery(t.selector+" .subsets").show(),_.each(a,function(t){_.isObject(c)&&-1===c.indexOf(t.id)&&(c=_.reject(c,function(e){return e===t.id})),r.push({id:t.id,text:t.label})})):jQuery(t.selector+" .subsets").hide(),jQuery(i).hasClass("select2-hidden-accessible")&&(jQuery(i).selectWoo("destroy"),jQuery(i).empty()),(e=jQuery(i).selectWoo({data:r,width:"100%"})).val(c).trigger("change"),e.on("change",function(){t.saveValue("subsets",jQuery(this).val())})},getSubsets:function(t){var o=!1,e=this.getFonts();return _.each(e.google,function(e){if(e.family===t)return o=e.subsets}),o},saveValue:function(e,t){var o=this.container.find(".typography-hidden-value"),n=this.setting._value;n[e]=t,jQuery(o).attr("value",JSON.stringify(n)).trigger("change"),this.setting.set(n)},updateFontSize:function(){var e=this.setting._value,t=this.container.find(".typography-hidden-value"),o={"font-size":{}};this.container.find(".font-size .control-wrap").each(function(){var e=jQuery(this).find("input").val(),t=jQuery(this).find("input").data("device");o["font-size"][t]=e}),jQuery.extend(e,o),jQuery(t).attr("value",JSON.stringify(e)).trigger("change"),this.setting.set(e)},updateLineHeight:function(){var e=this.setting._value,t=this.container.find(".typography-hidden-value"),o={"line-height":{}};this.container.find(".line-height .control-wrap").each(function(){var e=jQuery(this).find("input").val(),t=jQuery(this).find("input").data("device");o["line-height"][t]=e}),jQuery.extend(e,o),jQuery(t).attr("value",JSON.stringify(e)).trigger("change"),this.setting.set(e)},updateLetterSpacing:function(){var e=this.setting._value,t=this.container.find(".typography-hidden-value"),o={"letter-spacing":{}};this.container.find(".letter-spacing .control-wrap").each(function(){var e=jQuery(this).find("input").val(),t=jQuery(this).find("input").data("device");o["letter-spacing"][t]=e}),jQuery.extend(e,o),jQuery(t).attr("value",JSON.stringify(e)).trigger("change"),this.setting.set(e)}});