!function(t){t(window).on("load",function(){t("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["colormag-background"]=wp.customize.Control.extend({ready:function(){"use strict";this.initColorMagBackgroundControl()},initColorMagBackgroundControl:function(){var c=this,t=c.setting._value,e=c.container.find(".colormag-color-picker-alpha");!_.isUndefined(t["background-image"])&&""!==t["background-image"]||(c.container.find(".customize-control-content > .background-repeat").hide(),c.container.find(".customize-control-content > .background-position").hide(),c.container.find(".customize-control-content > .background-size").hide(),c.container.find(".customize-control-content > .background-attachment").hide()),e.wpColorPicker({change:function(){jQuery("html").hasClass("colorpicker-ready")&&setTimeout(function(){c.saveValue("background-color",e.val())},100)},clear:function(t){jQuery(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&c.saveValue("background-color","")}}),c.container.on("click",".background-image-upload-button",function(t){var r=wp.media({multiple:!1}).open().on("select",function(){var t,e,n,o=r.state().get("selection").first(),i=o.toJSON().sizes.full.url;_.isUndefined(o.toJSON().sizes.medium)?_.isUndefined(o.toJSON().sizes.thumbnail)||(i=o.toJSON().sizes.thumbnail.url):i=o.toJSON().sizes.medium.url,t=o.toJSON().sizes.full.url,o.toJSON().id,o.toJSON().width,o.toJSON().height,""!==t&&c.container.find(".customize-control-content > .background-repeat, .customize-control-content > .background-position, .customize-control-content > .background-size, .customize-control-content > .background-attachment").show(),c.saveValue("background-image",t),e=c.container.find(".placeholder, .thumbnail"),n=c.container.find(".background-image-upload-remove-button"),e.length&&e.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+i+'" alt="" />'),n.length&&n.show()});t.preventDefault()}),c.container.on("click",".background-image-upload-remove-button",function(t){var e,n;t.preventDefault(),c.saveValue("background-image",""),e=c.container.find(".placeholder, .thumbnail"),n=c.container.find(".background-image-upload-remove-button"),c.container.find(".customize-control-content > .background-repeat").hide(),c.container.find(".customize-control-content > .background-position").hide(),c.container.find(".customize-control-content > .background-size").hide(),c.container.find(".customize-control-content > .background-attachment").hide(),e.length&&e.removeClass().addClass("placeholder").html(ColorMagCustomizerControlBackground.placeholder),n.length&&n.hide()}),c.container.on("change",".background-repeat select",function(){c.saveValue("background-repeat",jQuery(this).val())}),c.container.on("change",".background-position select",function(){c.saveValue("background-position",jQuery(this).val())}),c.container.on("change",".background-size select",function(){c.saveValue("background-size",jQuery(this).val())}),c.container.on("change",".background-attachment select",function(){c.saveValue("background-attachment",jQuery(this).val())})},saveValue:function(t,e){var n=this,o=jQuery("#customize-control-"+n.id.replace("[","-").replace("]","")+" .background-hidden-value"),i=n.setting._value;i[t]=e,jQuery(o).attr("value",JSON.stringify(i)).trigger("change"),n.setting.set(i)}})}(jQuery),wp.customize.controlConstructor["colormag-buttonset"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["colormag-dropdown-categories"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("change","select",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["colormag-editor"]=wp.customize.Control.extend({ready:function(){"use strict";var t="editor_"+this.id;wp.editor.initialize(t,{tinymce:{wpautop:!0},quicktags:!0,mediaButtons:!0})},onChangeActive:function(t,e){"use strict";var n,o=this,i="editor_"+o.id,r=o.container.find("textarea");(n=tinyMCE.get(i))&&n.onChange.add(function(t){var e;t.save(),e=n.getContent(),r.val(e).trigger("change"),wp.customize.instance(o.id).set(e)})}}),wp.customize.controlConstructor["colormag-radio-image"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["colormag-slider"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;jQuery("input[type=range]").on("input change",function(){var t=jQuery(this).attr("value"),e=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .value");e.val(t),e.change()}),jQuery(".colormag-slider-reset").click(function(){var t=jQuery(this).closest(".slider-wrapper"),e=t.find("input[type=range]"),n=t.find(".colormag-range-value .value"),o=e.data("reset_value");e.val(o),n.val(o),n.change()}),this.container.on("input change","input[type=number]",function(){var t=jQuery(this).val();jQuery(this).closest(".slider-wrapper").find("input[type=range]").val(t),e.setting.set(t)})}}),wp.customize.controlConstructor["colormag-toggle"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.setting._value;this.container.on("change","input",function(){e=!!jQuery(this).is(":checked"),t.setting.set(e)})}}),function(t){t(window).on("load",function(){t("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["colormag-color"]=wp.customize.Control.extend({ready:function(){"use strict";var o=this;this.container.find(".colormag-color-picker-alpha").wpColorPicker({change:function(t,e){var n=e.color.toString();jQuery("html").hasClass("colorpicker-ready")&&o.setting.set(n)}})}})}(jQuery);